<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="97376ce6-8a36-4310-88bd-f9e4955d29f3" activeEnvironment="Default" name="RESTAssignment" resourceRoot="" soapui-version="5.6.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="eaeae962-1044-4eae-8f97-a1eb3187b379" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://rest-api.upskills.in" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache/><con:endpoints><con:endpoint>http://rest-api.upskills.in</con:endpoint></con:endpoints><con:resource name="Client_credentials" path="/api/rest_admin/oauth2/token/client_credentials" id="d2d8604d-0131-4030-bcb8-04e28ce486d7"><con:settings/><con:parameters/><con:method name="Client_credentials 1" id="3f3d74f7-baef-448a-85ac-ce5653c6f810" method="POST"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>405</con:status><con:params/><con:element xmlns:cli="http://rest-api.upskills.in/api/rest_admin/oauth2/token/client_credentials">cli:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:cli="http://rest-api.upskills.in/api/rest_admin/oauth2/token/client_credentials">cli:Response</con:element></con:representation><con:request name="Request 1" id="9e3849aa-f56f-4cd9-a9c2-2af262399c8f" mediaType="application/json"><con:settings/><con:endpoint>http://rest-api.upskills.in</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="8fa7e108-b9fc-4dd9-8c55-6571b3c7fc74" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://rest-api.upskills.in" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://rest-api.upskills.in</con:endpoint></con:endpoints><con:resource name="Login" path="/api/rest_admin/login" id="7aabec5c-ad62-4b42-a7d2-fb377ed4938b"><con:settings/><con:parameters/><con:method name="Login 1" id="66acb43b-c55d-4404-9e82-b45981129d0b" method="POST"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>401 400</con:status><con:params/><con:element xmlns:log="http://rest-api.upskills.in/api/rest_admin/login">log:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="Request 1" id="8709e41c-6ee4-43e3-bebc-5e1571b61797" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://rest-api.upskills.in</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="30146061-683c-4f94-a368-cd777be427dd" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://rest-api.upskills.in" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://rest-api.upskills.in</con:endpoint></con:endpoints><con:resource name="Level" path="/api/rest_admin/categories/level/" id="4a39f339-7fed-45b1-b7a1-26ccfe4a1663"><con:settings/><con:parameters/><con:method name="Level 1" id="1e63a9c7-7489-43d3-8673-65833c980fbc" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:lev="http://rest-api.upskills.in/api/rest_admin/categories/level/">lev:Response</con:element></con:representation><con:request name="Request 1" id="0b930099-613a-406c-bdd0-3702e9d969f8" mediaType="application/json"><con:settings/><con:endpoint>http://rest-api.upskills.in</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="0d2d63fa-469e-4282-ae90-568c3136800c" wadlVersion="http://wadl.dev.java.net/2009/02" name="http://rest-api.upskills.in" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://rest-api.upskills.in</con:endpoint></con:endpoints><con:resource name="Parent" path="/api/rest_admin/categories/parent/" id="54dcf905-09ed-4c1e-8f4e-e57e29b3b71f"><con:settings/><con:parameters/><con:method name="Parent 1" id="c63aa57b-4b7e-4a63-8e23-01f1c31753a6" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:par="http://rest-api.upskills.in/api/rest_admin/categories/parent/">par:Response</con:element></con:representation><con:request name="Request 1" id="93e24be6-3412-4df8-b67a-8d71784911b1" mediaType="application/json"><con:settings/><con:endpoint>http://rest-api.upskills.in</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite id="3e52e3d6-04cc-44be-b656-e4af9728c6dd" name="TestSuite 1"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="eaae3357-f60d-4f3a-8d44-a4833e9c61a0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="TestCase 1" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="GETToken" id="314696b4-68fb-4f96-a441-099aca6dcc06"><con:settings/><con:config service="http://rest-api.upskills.in" methodName="Client_credentials 1" resourcePath="/api/rest_admin/oauth2/token/client_credentials" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GETToken" id="5e3a09f0-71f9-4e02-bb08-5811fc75b5c7" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Basic dXBza2lsbHNfcmVzdF9hZG1pbl9vYXV0aF9jbGllbnQ6dXBza2lsbHNfcmVzdF9hZG1pbl9vYXV0aF9zZWNyZXQ=" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://rest-api.upskills.in</con:endpoint><con:request/><con:originalUri>http://rest-api.upskills.in/api/rest_admin/oauth2/token/client_credentials</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script" id="07ef88e5-3def-479f-8780-5a5e917c24c5"><con:settings/><con:config><script>import groovy.json.*
import jxl.*
import jxl.write.*


def res = context.expand('${GETToken#Response}')
def jsonslurper = new JsonSlurper()
def parsedtext = jsonslurper.parseText(res)
def logintoken = parsedtext.data.access_token
testRunner.testCase.getTestStepByName("Properties")setPropertyValue("Token","Bearer "+logintoken)

testRunner.testCase.testSuite.project.testSuites["TestSuite 1"].testCases["TestCase 1"].testSteps["Login"].run(testRunner,context)
testRunner.testCase.testSuite.project.testSuites["TestSuite 1"].testCases["TestCase 1"].testSteps["GETProduct"].run(testRunner,context)
testRunner.testCase.testSuite.project.testSuites["TestSuite 1"].testCases["TestCase 1"].testSteps["ParentLevel"].run(testRunner,context)

//to store parentid to customproperties

def res1 = context.expand('${ParentLevel#Response}')
//def jsonslurper = new JsonSlurper()
def parsedtext2 = jsonslurper.parseText(res1)
def Pid = parsedtext2.data[1].parent_id

def pid2=Pid.toString()
testRunner.testCase.getTestStepByName("Properties")setPropertyValue("ParentID",pid2)


/*Excel handling

def fr = "C:\\Users\\MarakathamaniSundara\\Desktop\\FullStalk_SDET\\prodcat.xls"
//def workbok = Workbook.getWorkbook(new File(filepath))
//Sheet shee = workbook.getSheet(0)
//Cell cel = shee.setCell(0,1)
//log.info cel

pid2=0
def fr = "C:\\Users\\MarakathamaniSundara\\Desktop\\FullStalk_SDET\\prodcat.xls"
Workbook wk = Workbook.getWorkbook(new File(fr));
WritableWorkbook wr = Workbook.createWorkbook(fr,wk);

WritableSheet sheet= wr.getSheet(0);


def r = sheet.getRows(); 

log.info "rows: ${r}"


Label orderid = new Label(0,r ,"ParentID"); 
sheet.addCell(orderid);
Label mode = new Label(1,r ,pid2); 
sheet.addCell(mode);

wr.write();

wr.close();
*/

</script></con:config></con:testStep><con:testStep type="properties" name="Properties" id="3b8ac6a7-ed45-4453-9bbc-1d2b60c4573c"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>Token</con:name><con:value>Bearer 991ddf567eed9bfc641027577ef779591ad07a98</con:value></con:property><con:property><con:name>ParentID</con:name><con:value>0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="Login" id="36e5ddae-3dc0-44da-bd30-b46cf417b7b4"><con:settings/><con:config service="http://rest-api.upskills.in" methodName="Login 1" resourcePath="/api/rest_admin/login" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Login" id="6ba3fcee-fb05-40b0-94f4-b0a1afd5b154" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${Properties#Token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://rest-api.upskills.in</con:endpoint><con:request>{
  "username": "upskills_admin",
  "password": "Talent4$$"
}</con:request><con:originalUri>http://rest-api.upskills.in/api/rest_admin/login</con:originalUri><con:assertion type="Response SLA Assertion" id="732864c8-0fe0-425a-a226-645d9d90086e" name="Response SLA"><con:configuration><SLA>1000</SLA></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="GETProduct" id="1575a419-a432-4e85-a467-f2ac5cd8e6a2"><con:settings/><con:config service="http://rest-api.upskills.in" methodName="Level 1" resourcePath="/api/rest_admin/categories/level/" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GETProduct" id="778f0767-bda8-45fb-abcb-0396de59f3e3" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${Properties#Token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://rest-api.upskills.in</con:endpoint><con:request/><con:originalUri>http://rest-api.upskills.in/api/rest_admin/categories/level/</con:originalUri><con:assertion type="Simple Contains" id="9ab2e152-fdb2-4234-863b-b0e2d3fccce9" name="Contains"><con:configuration><token>category_id</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="c270930c-0e5d-4cad-bdc0-5332317d39bd" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="ParentLevel" id="b88371a5-9839-48c0-8e3e-d4f465c70f5b"><con:settings/><con:config service="http://rest-api.upskills.in" methodName="Parent 1" resourcePath="/api/rest_admin/categories/parent/" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="ParentLevel" id="af4a6c65-5e73-4ed9-b65e-505735771278" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="${Properties#Token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://rest-api.upskills.in</con:endpoint><con:request/><con:originalUri>http://rest-api.upskills.in/api/rest_admin/categories/parent/</con:originalUri><con:assertion type="JsonPath Match" id="04bed990-93c1-40d8-bb49-6aa673d2d6e0" name="JsonPath Match"><con:configuration><path>data[1].parent_id</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6311e89-25fd-46bd-ba23-d97ccf38e938" name="Valid HTTP Status Codes" disabled="true"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="d49950a9-cf22-48e4-badd-925dfc67ac2e" name="Script Assertion"><con:configuration><scriptText>import groovy.json.*
def status = messageExchange.responseHeaders["#status#"]
assert status.contains("HTTP/1.1 200 OK")

def res = messageExchange.response.responseContent
def json = new JsonSlurper().parseText(res)
def parent_id = json.data[1].parent_id
log.info ("Parentid is "+parent_id)
assert parent_id == 0
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:properties/><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/></con:soapui-project>